╔═══════════════════════════════════════════════════════════════════════╗
║                    YAML VALIDATION REPORT                             ║
╚═══════════════════════════════════════════════════════════════════════╝

Дата: 2026-01-22 09:10:33
Директория: /tmp/test_fix

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
СТАТИСТИКА
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Всего файлов проверено: 19
Успешно:                6
С ошибками:             13

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ДЕТАЛЬНЫЙ ОТЧЁТ ОБ ОШИБКАХ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/brackets_and_special_values.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ СКОБОК ===
Строка 6: Непарные квадратные скобки [ ] (открытых: 1, закрытых: 0)
  Содержимое:   array_unclosed: [1, 2, 3
Строка 7: Непарные фигурные скобки { } (открытых: 1, закрытых: 0)
  Содержимое:   object_unclosed: {key: value
=== ПРЕДУПРЕЖДЕНИЯ: СПЕЦИАЛЬНЫЕ ЗНАЧЕНИЯ ===
Строка 8: ПРЕДУПРЕЖДЕНИЕ: 'yes' интерпретируется как true в YAML 1.1
  Содержимое:   yes_value: yes
  Рекомендация: Используйте 'true' или закавычьте "yes" если нужна строка
Строка 9: ПРЕДУПРЕЖДЕНИЕ: 'no' интерпретируется как false в YAML 1.1
  Содержимое:   no_value: no
  Рекомендация: Используйте 'false' или закавычьте "no" если нужна строка
Строка 10: ПРЕДУПРЕЖДЕНИЕ: 'on' интерпретируется как true в YAML 1.1
  Содержимое:   on_value: on
Строка 11: ПРЕДУПРЕЖДЕНИЕ: 'off' интерпретируется как false в YAML 1.1
  Содержимое:   off_value: off
Строка 14: ПРЕДУПРЕЖДЕНИЕ: '~' интерпретируется как null
  Содержимое:   tilde_null: ~
  Рекомендация: Используйте явное 'null' для лучшей читаемости

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/complex_errors.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ ДУБЛИКАТОВ КЛЮЧЕЙ ===
Строка 7: Дубликат ключа 'app' на уровне отступа 4
  Первое определение: строка 6
  Содержимое:     app: duplicate
=== ПРЕДУПРЕЖДЕНИЯ: СПЕЦИАЛЬНЫЕ ЗНАЧЕНИЯ ===
Строка 18: ПРЕДУПРЕЖДЕНИЕ: 'yes' интерпретируется как true в YAML 1.1
  Содержимое:       value: yes
  Рекомендация: Используйте 'true' или закавычьте "yes" если нужна строка
=== KUBERNETES: РАСШИРЕННАЯ ПРОВЕРКА ===
Строка 3: Неправильный регистр 'Metadata', должно быть 'metadata'
  Содержимое: Metadata:
Строка 19: Неправильный регистр 'restartpolicy', должно быть 'restartPolicy'
  Содержимое:   restartpolicy: Always
ПРЕДУПРЕЖДЕНИЕ: Отсутствует секция 'metadata' (требуется для Kubernetes)

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/document_markers_errors.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ МАРКЕРОВ ДОКУМЕНТА ===
Строка 8: Слишком много дефисов в маркере документа (должно быть 3)
  Содержимое: ----

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/duplicate_keys.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ ДУБЛИКАТОВ КЛЮЧЕЙ ===
Строка 5: Дубликат ключа 'name' на уровне отступа 2
  Первое определение: строка 4
  Содержимое:   name: duplicate-name
Строка 9: Дубликат ключа 'key1' на уровне отступа 2
  Первое определение: строка 7
  Содержимое:   key1: value3
Строка 11: Дубликат ключа 'setting' на уровне отступа 2
  Первое определение: строка 10
  Содержимое:   setting: disabled

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/empty_file.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКА: ПУСТОЙ ФАЙЛ ===
Файл не содержит данных (только пробелы, комментарии или пустые строки)

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/empty_keys.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ СИНТАКСИСА ===
Строка 7: Ключ содержит недопустимые символы: '"  "'
  Содержимое:   "  ": spaces-only-key
=== ОШИБКИ ПУСТЫХ КЛЮЧЕЙ ===
Строка 6: Пустой ключ (отсутствует имя перед двоеточием)
  Содержимое:   : no-key-here
Строка 7: Ключ состоит только из пробелов
  Содержимое:   "  ": spaces-only-key

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/indentation_error.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ ОТСТУПОВ ===
Строка 6: Несогласованный отступ (3 пробелов, ожидается кратное 2)
  Содержимое:    key1: value1
Строка 8: Несогласованный отступ (5 пробелов, ожидается кратное 2)
  Содержимое:      key3: value3

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/invalid_labels.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ СИНТАКСИСА ===
Строка 9: Ключ содержит недопустимые символы: 'has spaces'
  Содержимое:     has spaces: bad
Строка 11: Ключ содержит недопустимые символы: 'has@special#chars'
  Содержимое:     has@special#chars: bad
=== KUBERNETES: ФОРМАТ МЕТОК ===
Строка 7: Некорректный формат ключа метки '- starts-with-dash'
  Допустимы: буквы, цифры, '-', '_', '.' (начинается и заканчивается буквой/цифрой)
Строка 8: Некорректный формат ключа метки 'ends-with-dash-'
  Допустимы: буквы, цифры, '-', '_', '.' (начинается и заканчивается буквой/цифрой)
Строка 9: Некорректный формат ключа метки 'has spaces'
  Допустимы: буквы, цифры, '-', '_', '.' (начинается и заканчивается буквой/цифрой)
Строка 10: Ключ метки слишком длинный (80 > 63 символов)
  Ключ: way-too-long-label-name-that-exceeds-the-maximum-allowed-length-of-63-characters
Строка 11: Некорректный формат ключа метки 'has@special#chars'
  Допустимы: буквы, цифры, '-', '_', '.' (начинается и заканчивается буквой/цифрой)

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/k8s_typos.yaml
═══════════════════════════════════════════════════════════════════════
=== KUBERNETES: БАЗОВЫЕ ПОЛЯ ===
ПРЕДУПРЕЖДЕНИЕ: Отсутствует поле 'apiVersion' (требуется для Kubernetes манифестов)
ПРЕДУПРЕЖДЕНИЕ: Отсутствует поле 'kind' (требуется для Kubernetes манифестов)
=== KUBERNETES: РАСШИРЕННАЯ ПРОВЕРКА ===
Строка 1: Неправильный регистр 'apiversion', должно быть 'apiVersion'
  Содержимое: Apiversion: v1
Строка 2: Неправильный регистр 'Kind', должно быть 'kind'
  Содержимое: Kind: Pod
Строка 3: Неправильный регистр 'Metadata', должно быть 'metadata'
  Содержимое: Metadata:
Строка 5: Неправильный регистр 'Spec', должно быть 'spec'
  Содержимое: Spec:
Строка 9: Неправильный регистр 'imagepullpolicy', должно быть 'imagePullPolicy'
  Содержимое:     imagepullpolicy: Always
Строка 11: Возможная опечатка 'container_port', должно быть 'containerPort'
  Содержимое:     - container_port: 80
Строка 13: Неправильный регистр 'restartpolicy', должно быть 'restartPolicy'
  Содержимое:   restartpolicy: Always
ПРЕДУПРЕЖДЕНИЕ: Отсутствует секция 'metadata' (требуется для Kubernetes)

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/missing_k8s_fields.yaml
═══════════════════════════════════════════════════════════════════════
=== KUBERNETES: БАЗОВЫЕ ПОЛЯ ===
ПРЕДУПРЕЖДЕНИЕ: Отсутствует поле 'apiVersion' (требуется для Kubernetes манифестов)
ПРЕДУПРЕЖДЕНИЕ: Отсутствует поле 'kind' (требуется для Kubernetes манифестов)

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/missing_k8s_metadata.yaml
═══════════════════════════════════════════════════════════════════════
=== KUBERNETES: РАСШИРЕННАЯ ПРОВЕРКА ===
ПРЕДУПРЕЖДЕНИЕ: Отсутствует 'metadata.name' (обязательное поле)

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/syntax_error.yaml
═══════════════════════════════════════════════════════════════════════
=== ОШИБКИ СИНТАКСИСА ===
Строка 4: Отсутствует пробел после двоеточия
  Содержимое:   name:test-deployment
  Исправление: Добавьте пробел после ':' -> 'name: test-deployment'
Строка 11: Непарные одинарные кавычки
  Содержимое:       app: 'test

═══════════════════════════════════════════════════════════════════════
ФАЙЛ: /tmp/test_fix/windows_encoding.yaml
═══════════════════════════════════════════════════════════════════════
=== KUBERNETES: РАСШИРЕННАЯ ПРОВЕРКА ===
ПРЕДУПРЕЖДЕНИЕ: Ресурс 'Pod' обычно требует секцию 'spec'

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
РЕКОМЕНДАЦИИ ПО ИСПРАВЛЕНИЮ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

АВТОМАТИЧЕСКИ ИСПРАВЛЯЕМЫЕ (./fix_yaml_issues.sh):
───────────────────────────────────────────────────

1. BOM (Byte Order Mark):
   Команда: sed -i '1s/^\xEF\xBB\xBF//' <файл>

2. WINDOWS ENCODING (CRLF -> LF):
   Команда: dos2unix <файл>
   Или: sed -i 's/\r$//' <файл>

3. ТАБЫ -> ПРОБЕЛЫ:
   Команда: expand -t 2 <файл> > <файл>.tmp && mv <файл>.tmp <файл>

4. TRAILING WHITESPACE:
   Команда: sed -i 's/[[:space:]]*$//' <файл>

5. ЭЛЕМЕНТЫ СПИСКА БЕЗ ПРОБЕЛА (-item -> - item):
   Команда: sed -i 's/^\([[:space:]]*\)-\([^[:space:]-]\)/\1- \2/' <файл>

6. БУЛЕВЫ ЗНАЧЕНИЯ (True -> true, False -> false):
   Команда: sed -i 's/: True$/: true/; s/: FALSE$/: false/' <файл>

РУЧНОЕ ИСПРАВЛЕНИЕ:
───────────────────

7. ОТСТУПЫ:
   Исправить в редакторе, используя пробелы кратные 2

8. НЕПАРНЫЕ КАВЫЧКИ/СКОБКИ:
   Найти и закрыть незакрытые кавычки или скобки

9. ДУБЛИКАТЫ КЛЮЧЕЙ:
   Удалить или переименовать повторяющиеся ключи

10. KUBERNETES ПОЛЯ:
    Добавить отсутствующие обязательные поля (apiVersion, kind, metadata.name)

11. ОПЕЧАТКИ В ИМЕНАХ ПОЛЕЙ K8S:
    containerPort (не container_port)
    targetPort (не target_port)
    imagePullPolicy (не imagepullpolicy)


Конец отчёта
═══════════════════════════════════════════════════════════════════════════
